<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TRC20 USDT 收款</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
body{
  font-family:Arial;
  text-align:center;
  background:#f4f6f8;
  padding:40px;
}
.card{
  background:white;
  padding:30px;
  border-radius:15px;
  box-shadow:0 10px 30px rgba(0,0,0,0.1);
  display:inline-block;
}
input{
  padding:12px;
  font-size:18px;
  width:220px;
  border-radius:8px;
  border:1px solid #ccc;
}
button{
  padding:12px 20px;
  font-size:18px;
  border-radius:8px;
  border:none;
  background:#e50914;
  color:white;
  cursor:pointer;
  margin-top:15px;
}
#qrcode{
  margin-top:20px;
}
.url{
  margin-top:15px;
  font-size:12px;
  color:gray;
  word-break:break-all;
}
</style>
</head>

<body>

<div class="card">
<h2>TRC20 USDT 收款</h2>

<input type="number" id="amount" placeholder="輸入USDT金額"><br>
<button onclick="generate()">生成付款QR</button>

<div id="qrcode"></div>
<div class="url" id="payurl"></div>
</div>

<script>
function generate(){

  const amount = document.getElementById("amount").value;

  if(!amount || amount<=0){
    alert("請輸入正確金額");
    return;
  }

  // ⭐ 絕對不會404的安全寫法
  const base = window.location.href.replace("index.html","");
  const payUrl = new URL("pay.html", base).href + "?amount=" + amount;

  document.getElementById("payurl").innerText = payUrl;

  document.getElementById("qrcode").innerHTML = "";

  new QRCode(document.getElementById("qrcode"),{
    text: payUrl,
    width:260,
    height:260
  });
}
</script>

</body>
</html>
